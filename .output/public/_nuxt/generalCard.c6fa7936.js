import"./index.ac9df0f7.js";import{C as _,D as v,a as u,o as l,b as d,e as o,F as m,r as p,B as f,t as c,p as x,m as y}from"./entry.452b7f3a.js";import{_ as I}from"./_plugin-vue_export-helper.c27b6911.js";const M={props:{prospect:Object,index:Number,permissionDrag:Boolean},data(){return{startPoint:null,offsetX:0,offsetY:0,zIndex:0,currentImageIndex:0}},computed:{cardStyle(){let s=0;s=this.index*5;let e=3;return this.index==0&&(e=0),{transform:`rotate(${s}deg) translateX(${this.index*10}px)`,filter:`blur(${e}px)`}},imageStyle(){}},methods:{getAge(s){const e=new Date(s._dob),t=new Date,i=t.getFullYear()-e.getFullYear();return(t.getMonth()<e.getMonth()||t.getMonth()===e.getMonth()&&t.getDate()<e.getDate())&&i--,i},resetRotation(){document.querySelectorAll(".prospect-card").forEach((e,t)=>{t!==this.index&&(e.style.transition="transform 1s",t>=1&&t<=2&&(rotation=t+2),e.computed.cardStyle())})},startDragging(s){if(this.permissionDrag){if(this.isTouchDevice()){s.preventDefault();const e=s.changedTouches[0];if(!e)return;this.startPoint={x:e.clientX,y:e.clientY},document.addEventListener("touchmove",this.handleTouchMove),this.$el.style.transition="transform 0s"}else{const{clientX:e,clientY:t}=s;this.startPoint={x:e,y:t},document.addEventListener("mousemove",this.handleMouseMove),this.$el.style.transition="transform 0s"}document.addEventListener("mouseup",this.handleMoveUp),document.addEventListener("touchend",this.handleTouchEnd),document.addEventListener("cancel",this.handleTouchEnd)}},handleMove(s,e){if(!this.permissionDrag)return;this.offsetX=s-this.startPoint.x,this.offsetY=e-this.startPoint.y;const t=this.offsetX*.1;this.$el.style.transform=`translate(${this.offsetX}px, ${this.offsetY}px) rotate(${t}deg)`,Math.abs(this.offsetX)>this.$el.clientWidth*.1&&this.dismiss(this.offsetX>0?1:-1)},getIdentity(s){return _().getIdentitiesById(s)},getInterest(s){return v().getInterestsById(s)},handleMouseMove(s){if(s.preventDefault(),!this.startPoint)return;const{clientX:e,clientY:t}=s;this.handleMove(e,t)},handleMoveUp(){this.startPoint=null,document.removeEventListener("mousemove",this.handleMouseMove),this.$el.style.transform=""},handleTouchMove(s){if(!this.startPoint)return;const e=s.changedTouches[0];if(!e)return;const{clientX:t,clientY:i}=e;this.handleMove(t,i)},handleTouchEnd(){this.startPoint=null,document.removeEventListener("touchmove",this.handleTouchMove),this.$el.style.transform=""},async dismiss(s){if(s==1)try{const t=localStorage.getItem("CupidConnectId"),i=localStorage.getItem("CupidConnectToken"),h=this.prospect._id,n={liker_userId:t,liked_userId:h},r=await u.post("https://espacionebula.com:8000/add-like",n,{headers:{"Access-Control-Allow-Origin":"*",Authorization:`Bearer ${i}`},mode:"cors"}),a=r.data;a.success?console.log(a):console.log("There was an error with the user : "+r.data.error)}catch(t){console.error("Error in fetchUser:",t)}else if(s==-1)try{const t=localStorage.getItem("CupidConnectId"),i=localStorage.getItem("CupidConnectToken"),h=this.prospect._id,n={disliker_userId:t,disliked_userId:h},r=await u.post("https://espacionebula.com:8000/add-dislike",n,{headers:{"Access-Control-Allow-Origin":"*",Authorization:`Bearer ${i}`},mode:"cors"}),a=r.data;a.success?console.log(a):console.log("There was an error with the user : "+r.data.error)}catch(t){console.error("Error in fetchUser:",t)}this.startPoint=null,document.removeEventListener("mouseup",this.handleMoveUp),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("touchend",this.handleTouchEnd),document.removeEventListener("touchmove",this.handleTouchMove);const e=this.$el.querySelector(".image-container");e&&(e.scrollTop=0),this.$el.style.transition="transform 0.7s",this.$el.style.transform=`translate(${s*window.innerWidth}px, ${this.offsetY}px) rotate(${90*s}deg)`,this.$el.addEventListener("transitionend",this.handleTransitionEnd)},handleTransitionEnd(){this.$el.style.transition="transform 0s",this.$el.style.transform="translate(0, 0)",this.$el.removeEventListener("transitionend",this.handleTransitionEnd),this.$emit("dismissed")},isTouchDevice(){return"ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0}}},g=s=>(x("data-v-675bd280"),s=s(),y(),s),E={class:"image-container"},b={class:"select-none pointer-events-none"},T=["src"],w={class:"text-overlay"},D={class:"name"},S={class:"age"},k={class:"bg-black w-full h-full flex flex-col pl-[24px] pr-[24px]"},C={class:"w-full flex justify-between"},L={class:"flex flex-col justify-center"},P={class:"text-[48px] font-bold"},A={class:"text-[32px]"},X={class:"text-[128px] font-bold"},B={class:"pt-[41px]"},Y=g(()=>o("span",{class:"text-[32px] font-bold"},"About",-1)),$={class:"text-[20px]"},U={class:"pt-[41px]"},z=g(()=>o("span",{class:"text-[32px] font-bold"},"Interests",-1)),F={class:"flex mt-[13px] flex-wrap"};function j(s,e,t,i,h,n){return l(),d("div",{class:"card",onMousedown:e[0]||(e[0]=(...r)=>n.startDragging&&n.startDragging(...r)),onTouchstart:e[1]||(e[1]=(...r)=>n.startDragging&&n.startDragging(...r)),style:f(n.cardStyle)},[o("div",E,[o("div",b,[(l(!0),d(m,null,p(t.prospect._pictures,(r,a)=>(l(),d("img",{key:a,src:"https://espacionebula.com/img/"+r,alt:"Profile Picture",class:"profile-image",style:f(n.imageStyle)},null,12,T))),128)),o("div",w,[o("h2",D,c(t.prospect._fname),1),o("p",S,c(n.getAge(t.prospect)),1)])]),o("div",k,[o("div",C,[o("div",L,[o("div",P,c(t.prospect._fname+" "+t.prospect._lname),1),o("div",A,c(n.getIdentity(t.prospect.identities)),1)]),o("div",X,c(n.getAge(t.prospect)),1)]),o("div",B,[Y,o("div",$,c(t.prospect._description),1)]),o("div",U,[z,o("div",F,[(l(!0),d(m,null,p(t.prospect._interests,(r,a)=>(l(),d("div",{class:"text-[20px] border rounded-[90px] border-[#686262] pl-[12px] pr-[12px] mr-[3.5px] ml-[3.5px]",key:a},c(n.getInterest(r)),1))),128))])])])])],36)}const W=I(M,[["render",j],["__scopeId","data-v-675bd280"]]);export{W as C};
