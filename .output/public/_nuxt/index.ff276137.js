import{_ as b,a as P}from"./generalMenu.343515dd.js";import"./index.ac9df0f7.js";import{a as h,o as n,b as l,e as t,t as _,i as w,A as f,c as k,j as m,B as g,F as A,r as I,l as p}from"./entry.452b7f3a.js";import{_ as v}from"./_plugin-vue_export-helper.c27b6911.js";import{C as T}from"./generalCard.c6fa7936.js";import"./nuxt-link.bdbb5b1b.js";import"./logoCupid.b8dda0a7.js";import"./swiper-vue.05a5116d.js";const S={props:{prospect:Object,index:Number,isLikesActive:Boolean},methods:{async dislikeProspect(){try{const s=localStorage.getItem("CupidConnectId"),e=localStorage.getItem("CupidConnectToken"),r=this.prospect._id,c={disliker_userId:s,disliked_userId:r},o=await h.post("https://espacionebula.com:8000/add-dislike",c,{headers:{"Access-Control-Allow-Origin":"*",Authorization:`Bearer ${e}`},mode:"cors"}),i=o.data;i.success?console.log(i):console.log("There was an error with the user : "+o.data.error)}catch(s){console.error("Error in fetchUser:",s)}this.$emit("dismissed")},async likeProspect(){try{const s=localStorage.getItem("CupidConnectId"),e=localStorage.getItem("CupidConnectToken"),r=this.prospect._id,c={liker_userId:s,liked_userId:r},o=await h.post("https://espacionebula.com:8000/add-like",c,{headers:{"Access-Control-Allow-Origin":"*",Authorization:`Bearer ${e}`},mode:"cors"}),i=o.data;i.success?console.log(i):console.log("There was an error with the user : "+o.data.error)}catch(s){console.error("Error in fetchUser:",s)}this.$emit("dismissed")},getAge(s){const e=new Date(s._dob),r=new Date,c=r.getFullYear()-e.getFullYear();return(r.getMonth()<e.getMonth()||r.getMonth()===e.getMonth()&&r.getDate()<e.getDate())&&c--,c}}},B={class:"w-[350px]"},D={class:"overflow-hidden cursor-pointer w-full h-[450px] rounded-xl relative"},U=["src"],j={class:"text-overlay bg-gradient-to-b from-black to-transparent"},W={class:"text-[28px] w-2/3 text-left"},z={class:"text-[64px] w-1/3"},M={class:"buttons-overlay"};function N(s,e,r,c,o,i){return n(),l("div",B,[t("div",D,[t("img",{src:"https://espacionebula.com/img/"+r.prospect._profilePicture,alt:"Profile Picture",class:"object-cover w-full h-full"},null,8,U),t("div",j,[t("h2",W,_(r.prospect._fname+" "+r.prospect._lname),1),t("p",z,_(i.getAge(r.prospect)),1)])]),t("div",M,[t("button",{class:"fas fa-times fa-3x",onClick:e[0]||(e[0]=(...d)=>i.dislikeProspect&&i.dislikeProspect(...d))}),r.isLikesActive?(n(),l("button",{key:0,class:"fas fa-heart fa-3x",onClick:e[1]||(e[1]=(...d)=>i.likeProspect&&i.likeProspect(...d))})):w("",!0)])])}const O=v(S,[["render",N],["__scopeId","data-v-32a9e834"]]),$={data(){return{isLikesActive:!0,isLikeSentActive:!1,prospectsLiked:[],prospectsLikedSent:[],showProspects:!1,showThisProspect:Object,showThisCurrentProspect:!1}},mounted(){},created:async function(){this.prospectsLiked=await this.getWhoLikedUsers(),this.prospectsLikedSent=await this.getLikedByUsers(),this.prospectsLiked&&this.prospectsLiked.length>0&&(this.showProspects=!0)},computed:{prospectsToDisplay(){return this.isLikeSentActive?this.prospectsLikedSent:this.isLikesActive?this.prospectsLiked:(this.showProspects=!1,[])}},components:{PosterCard:O,Card:T},methods:{outProspect(){this.showThisCurrentProspect=!1},showThisUser(s){this.showThisProspect=s,this.showThisCurrentProspect=!0},async getWhoLikedUsers(){try{const s=localStorage.getItem("CupidConnectId"),e=localStorage.getItem("CupidConnectToken"),r={_liked_userId:s},c=await h.post("https://espacionebula.com:8000/get-likes-to-user",r,{headers:{"Access-Control-Allow-Origin":"*",Authorization:`Bearer ${e}`},mode:"cors"}),o=c.data;if(o.success)return o.usersWhoLiked;console.log("There was an error with the user : "+c.data.error)}catch{}},async getLikedByUsers(){try{const s=localStorage.getItem("CupidConnectId"),e=localStorage.getItem("CupidConnectToken"),r={liker_userId:s},c=await h.post("https://espacionebula.com:8000/get-likes-user",r,{headers:{"Access-Control-Allow-Origin":"*",Authorization:`Bearer ${e}`},mode:"cors"}),o=c.data;if(o.success)return o.usersWhoILiked;console.log("There was an error with the user : "+c.data.error)}catch{}},async likesTabActive(s,e){s?(this.prospectsLiked=await this.getWhoLikedUsers(),this.prospectsLiked.length>0&&(this.showProspects=!0)):(this.prospectsLikedSent=await this.getLikedByUsers(),this.prospectsLikedSent.length>0&&(this.showProspects=!0)),this.isLikesActive=s,this.isLikeSentActive=e},removeProspect(s){this.prospectsToDisplay.splice(s,1),this.prospectsToDisplay.length===0&&(this.showProspects=!1)}}},F={class:"h-screen w-screen text-white flex relative"},V={key:0,class:"absolute w-full h-full bg-black/80 flex items-center justify-center z-10"},E={class:"lg:hidden"},Y={class:"hidden lg:block w-1/6"},G={class:"w-full lg:w-5/6 relative h-full overflow-scroll"},q={class:"w-full flex justify-center h-fit text-3xl p-5 mt-5"},H=t("li",{class:"w-[3px] bg-[#686262]"},null,-1),J={key:0,class:"w-full flex justify-center flex-wrap"},K={key:1,class:"w-full h-[70%]"},Q={class:"flex items-center justify-center h-full"},R={class:"text-center text-gray-500 text-2xl"},X=t("i",{class:"fas fa-street-view fas-2xl text-4xl mb-4"},null,-1),Z={key:0},ee=t("br",null,null,-1),se={key:1},te=t("br",null,null,-1);function oe(s,e,r,c,o,i){const d=f("Card"),x=b,C=P,y=f("PosterCard");return n(),l("div",F,[o.showThisCurrentProspect?(n(),l("div",V,[t("button",{class:"fas fa-arrow-left fa-3x absolute left-0 top-0 m-20",onClick:e[0]||(e[0]=a=>i.outProspect())}),(n(),k(d,{class:"overflow-scroll relative",key:0,index:0,prospect:o.showThisProspect,"permission-drag":!1,onDismissed:e[1]||(e[1]=a=>i.removeProspect(s.index))},null,8,["prospect"]))])):w("",!0),t("div",E,[m(x)]),t("div",Y,[m(C)]),t("div",G,[t("ul",q,[t("li",{class:"likesTitle p-5 font-bold cursor-pointer",style:g({fontWeight:o.isLikesActive?"bold":"normal"})},[t("a",{onClick:e[2]||(e[2]=a=>i.likesTabActive(!0,!1))}," Likes ")],4),H,t("li",{class:"likeSentActive p-5 cursor-pointer",style:g({fontWeight:o.isLikesActive?"normal":"bold"})},[t("a",{onClick:e[3]||(e[3]=a=>i.likesTabActive(!1,!0))}," Likes sent ")],4)]),o.showProspects?(n(),l("div",J,[(n(!0),l(A,null,I(i.prospectsToDisplay,(a,u)=>(n(),k(y,{class:"m-1",key:u,index:u,prospect:a,isLikesActive:o.isLikesActive,onDismissed:L=>i.removeProspect(u),onClick:L=>i.showThisUser(a)},null,8,["index","prospect","isLikesActive","onDismissed","onClick"]))),128))])):(n(),l("div",K,[t("div",Q,[t("div",R,[X,o.isLikesActive?(n(),l("p",Z,[p(" No one has liked you, "),ee,p("please continue to swipe! ")])):(n(),l("p",se,[p("You haven't like someone, "),te,p("please start to swipe!")]))])])]))])])}const he=v($,[["render",oe]]);export{he as default};
