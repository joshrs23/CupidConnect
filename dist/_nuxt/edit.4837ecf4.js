import{a as m,b as n,e,w as g,l as u,t as d,f,h as w,i as p,v as b,F as _,r as y,o as l,p as v,m as I}from"./entry.452b7f3a.js";import{_ as T}from"./logoCupid.b8dda0a7.js";import{_ as k}from"./_plugin-vue_export-helper.c27b6911.js";import"./swiper-vue.05a5116d.js";const C={data(){return{_username:"",description:"",identitiesData:[],selectedIdentity:"",orientationData:[],selectedOrientation:null,interestsData:[],selectedInterests:[],pictures:null,error:"",formTypes:{DESCRIPTION:"description",IDENTITY:"identity",ORIENTATION:"orientation",INTERESTS:"interests",PHOTOS:"photos"},errors:{description:"",identity:"",orientation:"",interests:"",photos:""},save:{description:"",identity:"",orientation:"",interests:"",photos:""},submissionStatus:{description:!1,identity:!1,orientation:!1,interests:!1}}},mounted(){localStorage.getItem("CupidConnectToken")||this.$router.push("/"),this._username=localStorage.getItem("CupidConnectuser"),this.fetchData()},methods:{async fetchData(){await this.fetchIdentities()},async submitForm(){const s=await this.submitFormDescription(),r=await this.submitFormIdentity(),c=await this.submitFormOrientation(),i=await this.submitFormInterests();this.submissionStatus=s,this.submissionStatus=r,this.submissionStatus=c,this.submissionStatus=i,Object.values(this.submissionStatus).every(t=>t)&&this.$router.push("/profile")},async submitFormDescription(){if(this.verify(this.formTypes.DESCRIPTION)){const s=localStorage.getItem("CupidConnectId"),r=localStorage.getItem("CupidConnectToken"),c={userId:s,newDescriptions:this.description},i=await m.post("https://espacionebula.com:8000/change-description-user",c,{headers:{"Access-Control-Allow-Origin":"*",Authorization:`Bearer ${r}`},mode:"cors"});i.data.success?(this.save.description="The description was saved successfully",this.clearErrorMessageAfterDelay()):(this.errors.description="There was an error with the description: "+i.data.error,console.log("There was an error with the description: "+i.data.error),this.clearErrorMessageAfterDelay())}},verify(s){if(s===this.formTypes.DESCRIPTION){if(!/^[a-zA-Z0-9_]{1,100}$/.test(this.description))return this.errors.description="The description cannot be more than 100 alphanumeric characters",!1}else if(s===this.formTypes.IDENTITY){if(!this.selectedIdentity)return this.errors.identity="Please select an identity",!1}else if(s===this.formTypes.ORIENTATION){if(!this.selectedOrientation)return this.errors.orientation="Please select an orientation",!1}else if(s===this.formTypes.INTERESTS){if(this.selectedInterests.length<3)return this.errors.interests="Please select up to 3 interests",!1}else if(s===this.formTypes.PHOTOS&&this.pictures==null)return this.errors.photos="Please select a photo",!1;return this.errors[s.toLowerCase()]="",!0},clearErrorMessageAfterDelay(){setTimeout(()=>{this.error="",this.errors=""},5e3)},async submitFormIdentity(){if(this.verify(this.formTypes.IDENTITY)){const s=localStorage.getItem("CupidConnectId"),r=localStorage.getItem("CupidConnectToken"),c={userId:s,newIdentity:this.selectedIdentity},i=await m.post("https://espacionebula.com:8000/change-identity-user",c,{headers:{"Access-Control-Allow-Origin":"*",Authorization:`Bearer ${r}`},mode:"cors"});i.data.success?(this.save.identity="The identity was saved successfully",this.clearErrorMessageAfterDelay()):(this.errors.identity="There was an error updating your identity : "+i.data.error,console.log("There was an error updating your identity : "+i.data.error),this.clearErrorMessageAfterDelay())}},async fetchIdentities(){try{const s=await m.get("https://espacionebula.com:8000/get-identities",{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"multipart/form-data"},mode:"cors"});this.identitiesData=s.data.identities,this.identitiesData.length>0&&(this.selectedIdentity=""),await this.fetchOrientations()}catch(s){console.error("Error in fetchIdentities:",s)}},async submitFormOrientation(){if(this.verify(this.formTypes.ORIENTATION)){const s=localStorage.getItem("CupidConnectId"),r=localStorage.getItem("CupidConnectToken"),c={userId:s,newOrientations:this.selectedOrientation},i=await m.post("https://espacionebula.com:8000/change-orientation-user",c,{headers:{"Access-Control-Allow-Origin":"*",Authorization:`Bearer ${r}`},mode:"cors"});i.data.success?(this.save.orientation="The orientation was saved successfully",this.clearErrorMessageAfterDelay()):(this.errors.orientation="There was an error updating your orientation : "+i.data.error,console.log("There was an error updating your orientation : "+i.data.error),this.clearErrorMessageAfterDelay())}},async fetchOrientations(){try{const s=await m.get("https://espacionebula.com:8000/get-orientations",{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"multipart/form-data"},mode:"cors"});this.orientationData=s.data.orientations,this.orientationData.length>0&&(this.selectedOrientation=""),await this.fetchInterests()}catch(s){console.error("Error in fetchOrientations:",s)}},async submitFormInterests(){if(this.verify(this.formTypes.INTERESTS)){const s=localStorage.getItem("CupidConnectId"),r=localStorage.getItem("CupidConnectToken"),c={userId:s,newInterests:this.selectedInterests},i=await m.post("https://espacionebula.com:8000/change-interest-user",c,{headers:{"Access-Control-Allow-Origin":"*",Authorization:`Bearer ${r}`},mode:"cors"});i.data.success?(this.save.interests="The interests were saved successfully",this.clearErrorMessageAfterDelay()):(this.errors.interests="There was an error updating your interests : "+i.data.error,console.log("There was an error updating your interests : "+i.data.error),this.clearErrorMessageAfterDelay())}},async fetchInterests(){try{const s=await m.get("https://espacionebula.com:8000/get-interests",{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"multipart/form-data"},mode:"cors"});this.interestsData=s.data.interests,this.interestsData.length>0&&(this.selectedInterests=""),await this.fetchUser()}catch(s){console.error("Error in fetchInterests:",s)}},handlePicturesChange(s){console.log("entro a handle"),this.pictures=s.target.files[0]},async submitFormPhotos(){if(console.log("entro a submit fotos"),this.verify(this.formTypes.PHOTOS))try{const s=new FormData,r=localStorage.getItem("CupidConnectId"),c=localStorage.getItem("CupidConnectToken");if(!c){console.error("Token de autorización no encontrado en el localStorage");return}s.append("userId",r),s.append("_profilePicture",this.pictures);const i=await m.post("https://espacionebula.com:8000/upload-picture-user",s,{headers:{"Access-Control-Allow-Origin":"*","Content-Type":"multipart/form-data",Authorization:`Bearer ${c}`},mode:"cors"});i.data.success?(this.save.photos="The photos were uploaded successfully",this.clearErrorMessageAfterDelay()):(this.errors.photos="There was an error updating photos : "+i.data.error,console.log("There was an error updating photos : "+i.data.error),this.clearErrorMessageAfterDelay())}catch(s){console.error("Error in explotó aquí:",s)}},async deletePhoto(s){try{const r=localStorage.getItem("CupidConnectId"),c=localStorage.getItem("CupidConnectToken"),i={userId:r,index:s},t=await m.post("https://espacionebula.com:8000/delete-picture-user",i,{headers:{"Access-Control-Allow-Origin":"*",Authorization:`Bearer ${c}`},mode:"cors"});t.data.success?(this.save.photos="The photos were deleted successfully: ",this.clearErrorMessageAfterDelay()):(this.errors.photos="There was an error deleting photos : "+t.data.error,console.log("There was an error deleting photos : "+t.data.error),this.clearErrorMessageAfterDelay())}catch(r){console.error("Error al eliminar la foto",r)}},async fetchUser(){try{const s=localStorage.getItem("CupidConnectId"),r=localStorage.getItem("CupidConnectToken"),c={userId:s},i=await m.post("https://espacionebula.com:8000/get-user",c,{headers:{"Access-Control-Allow-Origin":"*",Authorization:`Bearer ${r}`},mode:"cors"}),t=i.data;t.success?(this.identitiesData.length>0&&t.user.identities!=""&&(this.selectedIdentity=t.user.identities),t.user._description!=""&&(this.description=t.user._description),this.orientationData.length>0&&t.user._orientations!=""&&(this.selectedOrientation=t.user._orientations),this.interestsData.length>0&&t.user._interests.length>0&&(this.selectedInterests=t.user._interests),t.user._pictures.length>0&&(this.pictures=t.user._pictures)):(this.error="There was an error with the user : "+i.data.error,console.log("There was an error with the user : "+i.data.error),this.clearErrorMessageAfterDelay())}catch(s){console.error("Error in fetchUser:",s)}}}},a=s=>(v("data-v-19385f5b"),s=s(),I(),s),S={class:"h-full w-full text-white bg-black min-w-screen"},A=a(()=>e("div",{class:"flex justify-center items-center logoEdit"},[e("h2",null,[e("img",{src:T,alt:"frameIcon"})])],-1)),D={class:"grid grid-rows-5 grid-flow-col gap-4 border border mx-10 sm:mx-40 lg:mx-60"},O={class:"border-b white"},E={class:"p-8"},F={class:"block text-2xl sm:text-m lg:text-5xl lg:pl-25 xl:px-28 lg:pt-18"},P=a(()=>e("br",null,null,-1)),N=a(()=>e("span",{class:"block text-right lg:text-2xl lg:pr-12 lg:pt-18 pt-12"},[u("First provide us a quick "),e("b",null,"description"),u(" of"),e("br"),u("yourself:")],-1)),M=a(()=>e("div",{class:"lg:mt-4 mb-10 text-right pr-10"},[e("button",{type:"submit",class:"border p-2"}," SAVE ")],-1)),R={key:0,class:"text-red-500 text-center my-4"},B={key:1,class:"text-green-500 text-center my-4"},z={class:"border-b"},U={class:"p-8"},V={class:"relative block"},q=a(()=>e("span",{class:"block text-2xl sm:text-m lg:text-5xl lg:pl-25 xl:px-28 lg:pt-18"},[u("How do you "),e("b",null,"identify"),u("?")],-1)),H={class:"relative flex flex-col lg:flex-row items-baseline w-full md:8/12 lg:w-10/12 pt-12"},Y=a(()=>e("label",{class:"block text-2xl lg:text-5xl xl:pl-8 pr-5"},[e("b",null,"I am: ")],-1)),j=a(()=>e("option",{value:"",disabled:"",selected:""},"Select your identity",-1)),L=["value"],Z=a(()=>e("div",{class:"lg:mt-4 text-right pr-10 xl:pr-52"},[e("button",{type:"submit"},[e("i",{class:"fa-solid fa-arrow-right fa-2x"})])],-1)),G={key:0,class:"text-red-500 text-center my-4"},J={key:1,class:"text-green-500 text-center my-4"},K={class:"border-b"},Q={class:"p-8"},W={class:""},X=a(()=>e("span",{class:"block text-2xl sm:text-m lg:text-5xl lg:pl-25 xl:px-28 lg:pt-18"},[u("Please provide us with your "),e("b",null,"orientation"),u(".")],-1)),$={class:"block w-full w-full md:8/12 xl:pl-32 pt-12"},ee=a(()=>e("label",{class:"block lg:text-3xl lg:pr-12 lg:pt-18 pt-12"},"Select an option",-1)),te=a(()=>e("option",{value:"",disabled:"",selected:""},"Select your orientation",-1)),se=["value"],re=a(()=>e("div",{class:"lg:mt-4 text-right pr-10 xl:pr-52"},[e("button",{type:"submit"},[e("i",{class:"fa-solid fa-arrow-right fa-2x"})])],-1)),oe={key:0,class:"text-red-500 text-center my-4"},ie={key:1,class:"text-green-500 text-center my-4"},ne={class:"border-b"},le={class:"p-8"},ae={class:"relative block"},ce=a(()=>e("span",{class:"block text-2xl sm:text-m lg:text-5xl lg:pl-25 xl:px-28 lg:pt-18"},[u("Please provide us with your "),e("b",null,"interests"),u(".")],-1)),de={class:"block w-full w-full md:8/12 xl:pl-32 pt-12"},ue=a(()=>e("label",{class:"block lg:text-3xl lg:pr-12 lg:pt-18 pt-12"},"Select up to 3 interests",-1)),he=["value"],pe=a(()=>e("div",{class:"lg:mt-4 text-right pr-10 xl:pr-52"},[e("button",{id:"",type:"submit"},[e("i",{class:"fa-solid fa-arrow-right fa-2x"})])],-1)),me={key:0,class:"text-red-500 text-center my-4"},ge={key:1,class:"text-green-500 text-center my-4"},fe={class:"border-b"},_e={class:"p-8"},ye={class:"relative block"},be=a(()=>e("span",{class:"block text-2xl sm:text-m lg:text-5xl lg:pl-25 xl:px-28 lg:pt-18"},[u("Please provide us with your "),e("b",null,"photos"),u(".")],-1)),xe={class:"block w-full w-full md:8/12 xl:pl-32 pt-12"},we=a(()=>e("label",{for:"pictures",class:"text-xl border rounded p-2 cursor-pointer bg-black border border-gray hover:bg-gray-500 text-white py-2 px-4 rounded-full inline-flex items-center"},[e("i",{class:"fa-solid fa-images pr-2 fa-lg"}),u(" Upload File ")],-1)),ve=a(()=>e("div",{class:"lg:mt-4 text-right pr-10 xl:pr-52"},[e("button",{id:"",type:"submit"},[e("i",{class:"fa-solid fa-arrow-right fa-2x"})])],-1)),Ie={key:0,class:"text-red-500 text-center my-4"},Te={key:1,class:"text-green-500 text-center my-4"},ke={class:"w-72 h-72 p-10 rounded"},Ce=["src"],Se=["onClick"],Ae=a(()=>e("i",{class:"fa-solid fa-circle-xmark fa-2x"},null,-1)),De=[Ae],Oe={key:0,class:"text-red-500 text-center my-4"};function Ee(s,r,c,i,t,h){return l(),n("div",S,[A,e("div",D,[e("div",O,[e("form",{onSubmit:r[1]||(r[1]=g((...o)=>h.submitFormDescription&&h.submitFormDescription(...o),["prevent"]))},[e("div",E,[e("label",null,[e("span",F,[u("Hello "),e("b",null,d(t._username)+",",1),P,u("let's complete your profile!")]),N,f(e("textarea",{rows:"4",cols:"50",class:"text-lg p-4 leading-6 p-10 w-full lg:ml-10 lg:w-11/12 block form-input border-black-300 rounded-3xl mt-5 bg-black border border-gray",type:"text",id:"",name:"description","onUpdate:modelValue":r[0]||(r[0]=o=>t.description=o),required:""},null,512),[[w,t.description]])])]),M,t.errors.description?(l(),n("div",R,d(t.errors.description),1)):p("",!0),t.save.description?(l(),n("div",B,d(t.save.description),1)):p("",!0)],32)]),e("div",z,[e("form",{onSubmit:r[3]||(r[3]=g((...o)=>h.submitFormIdentity&&h.submitFormIdentity(...o),["prevent"]))},[e("div",U,[e("label",V,[q,e("div",H,[Y,f(e("select",{filterable:!0,class:"origin-bottom text-2xl lg:text-3xl p-4 w-full md:6/12 lg:w-8/12 form-input rounded-3xl bg-black border border-gray pl-10 custom-scrollbar-container",type:"text",name:"description","onUpdate:modelValue":r[2]||(r[2]=o=>t.selectedIdentity=o),required:""},[j,(l(!0),n(_,null,y(t.identitiesData,o=>(l(),n("option",{key:o._id,value:o._id,white:""},d(o.name),9,L))),128))],512),[[b,t.selectedIdentity]])])])]),Z,t.errors.identity?(l(),n("div",G,d(t.errors.identity),1)):p("",!0),t.save.identity?(l(),n("div",J,d(t.save.identity),1)):p("",!0)],32)]),e("div",K,[e("form",{onSubmit:r[5]||(r[5]=g((...o)=>h.submitFormOrientation&&h.submitFormOrientation(...o),["prevent"]))},[e("div",Q,[e("label",W,[X,e("div",$,[ee,f(e("select",{filterable:!0,class:"text-2xl lg:text-3xl p-4 w-full md:6/12 lg:w-8/12 form-input rounded-3xl bg-black border border-gray pl-10 custom-scrollbar-container",type:"text","onUpdate:modelValue":r[4]||(r[4]=o=>t.selectedOrientation=o),required:""},[te,(l(!0),n(_,null,y(t.orientationData,o=>(l(),n("option",{key:o._id,value:o._id,white:""},d(o.name),9,se))),128))],512),[[b,t.selectedOrientation]])])])]),re,t.errors.orientation?(l(),n("div",oe,d(t.errors.orientation),1)):p("",!0),t.save.orientation?(l(),n("div",ie,d(t.save.orientation),1)):p("",!0)],32)]),e("div",ne,[e("form",{onSubmit:r[7]||(r[7]=g((...o)=>h.submitFormInterests&&h.submitFormInterests(...o),["prevent"]))},[e("div",le,[e("label",ae,[ce,e("div",de,[ue,f(e("select",{filterable:!0,class:"text-2xl lg:text-3xl p-4 w-full md:6/12 lg:w-8/12 form-input rounded-3xl bg-black border border-gray pl-10 custom-scrollbar-container",type:"text",name:"description","onUpdate:modelValue":r[6]||(r[6]=o=>t.selectedInterests=o),required:"",multiple:""},[(l(!0),n(_,null,y(t.interestsData,o=>(l(),n("option",{key:o._id,value:o._id,white:""},d(o.name),9,he))),128))],512),[[b,t.selectedInterests]])])]),pe,t.errors.interests?(l(),n("div",me,d(t.errors.interests),1)):p("",!0),t.save.interests?(l(),n("div",ge,d(t.save.interests),1)):p("",!0)])],32)]),e("div",fe,[e("form",{onSubmit:r[9]||(r[9]=g((...o)=>h.submitFormPhotos&&h.submitFormPhotos(...o),["prevent"])),enctype:"multipart/form-data"},[e("div",_e,[e("label",ye,[be,e("div",xe,[we,e("input",{ref:"picturesInput",id:"pictures",name:"pictures",type:"file",class:"hidden",accept:"image/*",onChange:r[8]||(r[8]=(...o)=>h.handlePicturesChange&&h.handlePicturesChange(...o))},null,544)])]),ve,t.errors.interests?(l(),n("div",Ie,d(t.errors.interests),1)):p("",!0),t.save.photos?(l(),n("div",Te,d(t.save.photos),1)):p("",!0)])],32),(l(!0),n(_,null,y(t.pictures,(o,x)=>(l(),n("div",{key:x},[e("div",ke,[e("img",{src:"https://espacionebula.com/img/"+o,alt:"Profile photo"},null,8,Ce)]),e("button",{onClick:Fe=>h.deletePhoto(x),class:"text-red-500"},De,8,Se)]))),128))]),t.error?(l(),n("div",Oe,d(t.error),1)):p("",!0)])])}const Be=k(C,[["render",Ee],["__scopeId","data-v-19385f5b"]]);export{Be as default};
